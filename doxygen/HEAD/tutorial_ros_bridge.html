<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>sot-doc: ROS Bridge with SoT</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="pinocchio.ico" rel="icon" type="image/x-icon">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script>
<script type="text/javascript" async="async" src="MathJax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="sot.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">sot-doc
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">Documentation entry point for the Stack-Of-Tasks</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('tutorial_ros_bridge.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ROS Bridge with SoT </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doc_Tutorial_Ros_Bridge"></a> The core of the stack of tasks mechanism is independent from ROS: an execution is hence realized in a closed environment (the entities are only defined in the python environment and are only accessible via python commands). However, some bridges with ROS exist: for the display, but also to send and receive some pieces of data.</p>
<h1><a class="anchor" id="tutorial_ros_bridge_sig_to_topic"></a>
Signal to ROS topic</h1>
<p>Two entities allow you to exchange data from the ROS environment to the stack of tasks one, and convert ros topics in sot signals, namely <code>rosPublish</code> and <code>rosSubscribe</code>.</p>
<p>Here is a example of publication of matrix homogeneous from the sot environment to the ROS environment:</p>
<pre class="fragment">ros.rosPublish.add('matrixHomoStamped', robot.frames['rightGripper'].name +'_position', 'right_gripper')
ros.rosPublish.displaySignals()
--- &lt;rosPublish&gt; signal list:
    |-- &lt;Sig:N12dynamicgraph10RosPublishE(rosPublish)::input(MatrixHomo)::romeo_rightHand_position (Type Cst) AUTOPLUGGED
    `-- &lt;Sig:N12dynamicgraph10RosPublishE(rosPublish)::input(int)::trigger (Type Fun)
</pre><p>The robot right hand position is publised in a ROS topic: </p><pre class="fragment">rostopic list
/right_gripper
</pre><p>This creates an input signal for the ros.rosPublish entity (<code>romeo_rightHand_position</code>), as well as the rostopic element <code>/right_gripper</code>.</p>
<p>Please note that this alone does <b>NOT</b> publish anything. In order to publish something, it is hence necessary to plug a signal to the one created in rosPublish.</p>
<pre class="fragment">plug(robot.frames['rightGripper'].position, ros.rosPublish.signal(robot.frames['rightGripper'].name +'_position'))
</pre><p>Now you are publishing: </p><pre class="fragment">rostopic echo -n 1 /right_gripper
header:
    seq: 24577
    stamp:
        secs: 1408440100
        nsecs: 786866991
    frame_id: /dynamic_graph/world
child_frame_id: ''
    transform:
        translation:
            x: 0.12276189235
            y: -0.242369571396
            z: 0.659561031231
        rotation:
            x: -0.0883991792798
            y: 0.534618973732
            z: -0.0459091290832
            w: 0.839202284813
</pre><h1><a class="anchor" id="tutorial_ros_bridge_topic_to_sig"></a>
ROS tf to signal</h1>
<p>Importing a tf requires to convert first the tf into a matrix homogeneous in order to import it in the stack of tasks. The child_frame HAS TO be the odom frame, which is the base for the SoT environment. Hence, in order to use the position of an object in the stack of tasks, you can add this to the launch file: </p><pre class="fragment">&lt;node name="object"    pkg="dynamic_graph_bridge" type="tf_publisher"&gt;
    &lt;param name="frame"       type="string" value="object" /&gt;
    &lt;param name="child_frame" type="string" value="odom" /&gt;
    &lt;param name="topic"       type="string" value="object" /&gt;
&lt;/node&gt;
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
